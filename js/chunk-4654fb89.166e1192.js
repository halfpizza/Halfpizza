/*!
 *  build: admin-pro 
 *  copyright: chuzhixin 1204505056@qq.com 
 *  time: 2021-11-7 15:40:52
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4654fb89"],{"881f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"detail_page"},[e.tokenHave?n("div",{staticClass:"detail_main"},[n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{md:12,lg:12}},[n("div",{staticClass:"detail_img"},[n("img",{staticClass:"detail_img_main",attrs:{src:e.nft.path,alt:""}})])]),n("el-col",{attrs:{md:12,lg:12}},[n("div",[n("div",{staticClass:"token_detail_title"},[n("div",{staticClass:"detail_title_txt"},[e._v(e._s(e.nft.title))]),n("div",{staticClass:"detail_title_btn"},[n("el-button",{staticClass:"like_btn",attrs:{size:"mini",round:""},on:{click:e.likeToken}},[n("span",{class:{"ri-heart-line":!e.isLike,isLike:e.isLike,"ri-heart-fill":e.isLike}}),n("span",{staticClass:"like_num"},[e._v(e._s(e.likeNumTxt))])]),n("el-dropdown",{attrs:{trigger:"click"},on:{command:e.dropClick}},[n("el-button",{staticClass:"edit_btn",staticStyle:{padding:"5px"},attrs:{size:"mini",round:"",icon:"el-icon-more"}}),n("el-dropdown-menu",{staticStyle:{width:"100px"},attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:0}},[e._v(e._s(e.translateTitle("我要分享")))]),n("el-dropdown-item",{attrs:{command:1}},[e._v(e._s(e.translateTitle("我要举报")))])],1)],1)],1)]),e.tokenIsSell?n("div",[n("div",{staticClass:"token_detail_price"},[e._v(" "+e._s(e.translateTitle("初始价格"))+"："),n("span",[e._v(e._s(e.nft.base_price)+"pizza")])]),1==e.nft.sell_type?n("div",{staticClass:"token_detail_price"},[e._v(" "+e._s(e.translateTitle("拍卖结束时间"))+": "),n("span",[e._v(e._s(e._f("formatLess")(e.nft.tamp,e.time)))])]):e._e()]):e._e(),n("div",{staticClass:"token_create"},[n("p",{staticClass:"token_create_txt"},[e._v(e._s(e.translateTitle("创建者")))]),n("div",{staticClass:"token_create_info"},[n("el-avatar",{staticClass:"create_info_head",attrs:{size:30,src:e.nft.head,fit:"container"}}),n("span",{staticClass:"create_info_name"},[e._v(e._s(e.nft.user_name||e.$sliceAddress(e.nft.address)))])],1)]),e.tokenIsSell?n("div",{staticClass:"operation_btn"},[1===e.nft.sell_type?n("div",[e.time<e.nft.tamp?n("div",[n("el-row",{attrs:{gutter:15}},[n("el-col",{attrs:{span:12}},[n("el-button",{staticClass:"operation_btn_buy",attrs:{round:"",size:"small"},on:{click:e.showAddPrice}},[e._v(" "+e._s(e.translateTitle("我要出价"))+" ")])],1),n("el-col",{attrs:{span:12}},[n("el-button",{staticClass:"operation_btn_invest",attrs:{round:"",size:"small"},on:{click:e.showInvest}},[e._v(" "+e._s(e.translateTitle("我要投资"))+" ")])],1)],1)],1):n("div",{staticStyle:{color:"orangered"}},[e._v(" "+e._s(e.translateTitle("拍卖结束"))+" ")])]):e._e(),0===e.nft.sell_type?n("el-row",{attrs:{gutter:15}},[n("el-col",{attrs:{span:24}},[0===e.sellIsEnd?n("el-button",{staticClass:"operation_btn_buy",attrs:{round:"",size:"small"},on:{click:e.buying}},[e._v(" "+e._s(e.translateTitle("立即购买"))+" ")]):1===e.sellIsEnd?n("div",{staticStyle:{color:"orangered"}},[e._v(" "+e._s(e.translateTitle("已被购买"))+" ")]):e._e()],1)],1):e._e()],1):e._e(),n("el-tabs",{staticClass:"detail_tab",model:{value:e.tabVal,callback:function(t){e.tabVal=t},expression:"tabVal"}},[n("el-tab-pane",{attrs:{label:e.translateTitle("详情"),name:"0"}},[n("div",{staticClass:"tab_body"},[n("div",[e.ownerInfo.address?n("div",[n("div",{staticClass:"token_owner_txt"},[e._v(e._s(e.translateTitle("持有者")))]),n("div",{staticClass:"token_owner"},[n("el-avatar",{staticClass:"token_owner_head",attrs:{size:30,src:e.ownerInfo.head}}),n("span",{staticClass:"token_owner_name"},[e._v(e._s(e.ownerInfo.user_name||e.$sliceAddress(e.ownerInfo.address)))])],1)]):e._e(),n("div",{staticClass:"token_owner_txt"},[e._v("Token")]),n("div",{staticClass:"token_owner_desc"},[e._v(e._s(e.nft.token))]),n("div",{staticClass:"token_owner_txt"},[e._v(e._s(e.translateTitle("简介")))]),n("div",{staticClass:"token_owner_desc"},[e._v(e._s(e.nft.describe))])])])]),e.tokenIsSell?n("el-tab-pane",{attrs:{label:"Bids",name:"1"}},[n("div",{staticClass:"tab_body"},e._l(e.userTrade,(function(t){return n("div",{staticClass:"bids_user"},[n("el-avatar",{staticClass:"bids_user_head",attrs:{size:30,src:t.head}}),n("div",{staticClass:"bids_user_name"},[e._v(" "+e._s(t.user_name||e.$sliceAddress(t.address))+" ")]),n("div",{staticClass:"bids_user_price"},[e._v(e._s(e.translateTitle(t.type))+" "+e._s(t.price)+"pizza ")])],1)})),0)]):e._e(),e.tokenIsSell?n("el-tab-pane",{attrs:{label:e.translateTitle("历史"),name:"2"}},[n("div",{staticClass:"tab_body"},e._l(e.authorHistory,(function(t){return n("div",{staticClass:"history_owner"},[n("el-avatar",{staticClass:"history_owner_head",attrs:{size:30,src:t.head}}),n("span",{staticClass:"history_owner_name"},[e._v(e._s(t.user_name||e.$sliceAddress(t.address)))])],1)})),0)]):e._e()],1)],1)])],1)],1):n("div",{staticStyle:{padding:"10px"}},[n("el-alert",{attrs:{title:e.translateTitle("错误提示"),type:"error",closable:!1,description:e.translateTitle("error_tip"),"show-icon":""}})],1),n("el-dialog",{attrs:{title:e.nft.title||e.translateTitle("帮助与反馈"),"close-on-click-modal":!1,visible:e.repotDialog,width:"300px"},on:{"update:visible":function(t){e.repotDialog=t}}},[n("MyReport",{attrs:{token:e.nft.token,hash:e.nft.hash},on:{close:function(t){e.repotDialog=!1}}})],1),n("el-dialog",{attrs:{title:e.translateTitle("分享NFT"),"close-on-click-modal":!1,visible:e.shareDialog,width:"300px"},on:{"update:visible":function(t){e.shareDialog=t}}},[n("MyShare",{attrs:{token:e.nft.token},on:{close:function(t){e.shareDialog=!1}}})],1),n("el-dialog",{staticClass:"my_invest_dialog",attrs:{"close-on-click-modal":!1,visible:e.investDialog,"show-close":!1,width:"260px"},on:{"update:visible":function(t){e.investDialog=t}}},[n("div",{staticClass:"invest_dialog_title"},[e._v(e._s(e.translateTitle("我要投资")))]),n("div",{staticClass:"invest_dialog_body"},[n("div",{staticClass:"invest_dialog_price"},[e._v(e._s(e.translateTitle("invest_desc"))+"："+e._s(e.investMin)+"-"+e._s(e.investMax)+"PIZA ")]),n("div",{staticClass:"invest_inp_desc"},[e._v(e._s(e.translateTitle("我的投资")))]),n("label",{staticClass:"invest_inp"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.investVal,expression:"investVal"}],staticClass:"invest_inp_main",attrs:{placeholder:e.translateTitle("请输入投资金额"),autocomplete:"off",type:"text"},domProps:{value:e.investVal},on:{input:function(t){t.target.composing||(e.investVal=t.target.value)}}}),n("span",{staticClass:"invest_inp_icon"},[n("img",{attrs:{src:a("ee13"),alt:""}}),n("span",[e._v("piza")])])]),n("div",{staticClass:"invest_inp_desc"},[e._v(e._s(e.translateTitle("流动性奖金池1%"))+"："+e._s(e.investFee)+" piza")]),n("div",{staticClass:"invest_inp_sure",on:{click:e.investSure}},[e._v(e._s(e.translateTitle("确定")))]),n("div",{staticClass:"invest_inp_cancel",on:{click:function(t){e.investDialog=!1}}},[e._v(e._s(e.translateTitle("取消")))])])]),n("el-dialog",{staticClass:"add_price_dialog",attrs:{"close-on-click-modal":!1,visible:e.AddPriceDialog,title:e.translateTitle("我要出价"),width:"260px"},on:{"update:visible":function(t){e.AddPriceDialog=t}}},[n("div",{staticClass:"invest_dialog_body"},[n("div",{staticClass:"add_price_price"},[e._v(e._s(e.nft.title))]),n("div",{staticClass:"add_price_price"},[e._v(e._s(e.nft.token))]),n("div",{staticClass:"add_price_desc"},[e._v(e._s(e.translateTitle("我的竞拍")))]),n("label",{staticClass:"add_price_inp"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.AddPriceVal,expression:"AddPriceVal"}],staticClass:"add_price_main",attrs:{placeholder:e.translateTitle("请输入竞拍金额"),autocomplete:"off",type:"text"},domProps:{value:e.AddPriceVal},on:{input:function(t){t.target.composing||(e.AddPriceVal=t.target.value)}}}),n("span",{staticClass:"add_price_icon"},[n("img",{attrs:{src:a("ee13"),alt:""}}),n("span",[e._v("piza")])])]),n("div",{staticClass:"add_price_desc"},[e._v(e._s(e.translateTitle("至少"))+" "+e._s(e.addPriceMin+1)+" piza")]),n("div",{staticClass:"add_price_desc"},[e._v(e._s(e.translateTitle("最大"))+" "+e._s(parseInt(1.5*e.addPriceMin))+" piza")]),n("div",{staticClass:"add_price_desc"},[e._v(e._s(e.translateTitle("流动性奖金池1%"))+"："+e._s(e.addPriceFee)+" piza")]),n("div",{staticClass:"add_price_sure",on:{click:e.addPriceSure}},[e._v(e._s(e.translateTitle("确定")))])])])],1)},s=[],i=a("1da1"),r=a("5530"),c=(a("96cf"),a("ac1f"),a("5319"),a("d3b7"),a("b64b"),a("159b"),a("a9e3"),a("25f0"),a("79fa")),l=a("2f62"),o=a("c030"),d=a("9d78"),u=a("c8c0"),f={name:"NftDetail",components:{MyReport:d["default"],MyShare:u["default"]},data:function(){return{repotDialog:!1,shareDialog:!1,ownerInfo:{address:"",head:"",user_name:""},token:"",nft:{describe:"",hash:"",head:"",path:"",sell_end:"",sell_type:0,symbol_txt:"",title:"",token:"",user_name:"",address:""},isFixed:0,tabVal:"0",price:"",sellIsEnd:0,t:null,time:null,index:0,userTrade:[],authorHistory:[],likeNum:0,isLike:!1,investDialog:!1,investVal:"",investMax:0,investMin:0,AddPriceDialog:!1,AddPriceVal:"",addPriceMin:0,tokenHave:!0,tokenIsSell:!1}},created:function(){this.token=this.$route.params.id},mounted:function(){var e=this;this.setTime(),this.getData(),this.t=setInterval((function(){e.setTime(),e.index%10===0&&e.getData(),e.index++}),1e3)},computed:Object(r["a"])(Object(r["a"])({},Object(l["c"])({address:"connect/address",refer:"connect/refer",metamask:"settings/metamask",chainID:"connect/chainID"})),{},{likeNumTxt:function(){return this.likeNum<1e4?this.likeNum:"+999"},investFee:function(){return Math.ceil(.01*(this.investVal||0))},addPriceFee:function(){return Math.ceil(.01*(this.AddPriceVal||0))}}),beforeDestroy:function(){clearInterval(this.t)},filters:{formatLess:function(e,t){if(!e||!t)return"";var a="00d : 00h : 00m: 00s";if(e>t){var n=e-t,s=parseInt(n/24/3600),i=parseInt(n%86400/3600),r=parseInt(n%3600/60),c=n%60;a=(s>9?s:"0"+s)+"d : "+(i>9?i:"0"+i)+"h : "+(r>9?r:"0"+r)+"m : "+(c>9?c:"0"+c)+"s"}return a}},watch:{chainID:function(){this.getData()},address:function(){this.getData()},investVal:function(e){this.investVal=(e||"").replace(/[^\d]/g,"")},AddPriceVal:function(e){this.AddPriceVal=(e||"").replace(/[^\d]/g,"")}},methods:{dropClick:function(e){e?(this.repotDialog=!0,this.shareDialog=!1):(this.repotDialog=!1,this.shareDialog=!0)},setTime:function(){this.time=parseInt((new Date).getTime()/1e3)},translateTitle:c["translateTitle"],getData:function(){this.getTokenData()},getLikeToken:function(){var e=this;this.$ajax({url:"tokenLiked",method:"post",data:{token:this.nft.token}}).then((function(t){200===t.code&&(e.likeNum=t.data.num||0,e.isLike=t.data.isLike||0)})).catch((function(e){}))},likeToken:function(){var e=this;return this.address?this.chainID!==this.runChainID?(this.$message.warning(this.translateTitle("changeBsc")),!1):void this.$ajax({url:"dislike",data:{token:this.nft.token,dislike:this.isLike},method:"post"}).then((function(t){e.getLikeToken()})).catch((function(e){})):(this.$message.warning(this.translateTitle("mustConnectWallet")),!1)},tokenInSell:function(e){var t=this;return new Promise((function(a){if(t.chainID===t.runChainID){var n=new o["a"].providers.Web3Provider(window.ethereum),s=new o["a"].Contract(t.metamask.sellAddress,t.metamask.sellAbi,n);s.TokenSelling(e).then((function(e){a(!!e)})).catch((function(e){a(!1)}))}else a(!1)}))},showInvest:function(){this.getTokenMinMax(),this.investDialog=!0,this.investVal=""},getNftOwner:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.chainID===e.runChainID){t.next=2;break}return t.abrupt("return",!1);case 2:return a=new o["a"].providers.Web3Provider(window.ethereum),n=new o["a"].Contract(e.metamask.nftAddress,e.metamask.nftAbI,a),t.next=5,n.ownerOf(e.token);case 5:return s=t.sent,t.abrupt("return",e.$ajax({url:"getOwner",method:"post",data:{address:s}}).then((function(t){200===t.code&&t.data&&t.data.address&&(e.ownerInfo=t.data)})));case 7:case"end":return t.stop()}}),t)})))()},getBuyerUser:function(){var e=this;this.nft.hash&&this.$ajax({url:"buyingUser",method:"post",data:{hash:this.nft.hash}}).then((function(t){200===t.code?(e.userTrade=t.data||[],e.userTrade.length?e.sellIsEnd=1:e.sellIsEnd=0):e.sellIsEnd=-1})).catch((function(t){e.sellIsEnd=-1}))},getAuthorHistory:function(){var e=this;this.nft.token&&this.$ajax({url:"authorHistory",method:"post",data:{token:this.nft.token}}).then((function(t){200===t.code&&(e.authorHistory=t.data||[])})).catch((function(e){}))},getTokenData:function(){var e=this;this.$ajax({url:"tokenDetail",method:"post",data:{token:this.token}}).then((function(t){if(200===t.code){var a=Object.keys(t.data),n=e.nft;a.forEach((function(e){n[e]=t.data[e]})),e.tokenHave=!0,e.nft=n,e.getNftOwner(),e.getLikeToken(),e.tokenInSell(e.nft.token).then((function(t){e.tokenIsSell=t,t&&(e.getBuyerUser(),e.getAuthorHistory(),e.getTokenMinMax())}))}else e.tokenHave=!1})).catch((function(t){e.tokenHave=!1}))},fixedbuyer:function(){var e=this;return new Promise((function(t){var a=new o["a"].providers.Web3Provider(window.ethereum),n=new o["a"].Contract(e.metamask.sellAddress,e.metamask.sellAbi,a),s=n.connect(a.getSigner());s.fixedbuyer(e.nft.base_price,e.nft.token,Math.ceil(e.nft.base_price/100)).then((function(e){t({status:!0,msg:"",hash:e.hash})})).catch((function(e){var a=e.data?e.data.message:"buying nft fail";t({status:!1,msg:a,hash:""})}))}))},buying:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,s,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.address){t.next=3;break}return e.$message.warning(e.translateTitle("mustConnectWallet")),t.abrupt("return",!1);case 3:if(e.chainID===e.runChainID){t.next=6;break}return e.$message.warning(e.translateTitle("changeBsc")),t.abrupt("return",!1);case 6:return t.next=8,e.userbalance();case 8:if(a=t.sent,!(1e18*e.nft.base_price>a)){t.next=12;break}return e.$message.warning("pizza balance less then price"),t.abrupt("return",!1);case 12:return n=e.$baseLoading(3,"nft buying sending"),t.next=15,e.approve(e.nft.base_price);case 15:if(s=t.sent,s){t.next=20;break}return n.close(),e.$message.warning("buying fail ,try approve fail"),t.abrupt("return",!1);case 20:return t.next=22,e.fixedbuyer();case 22:if(i=t.sent,i.status){t.next=27;break}return n.close(),e.$message.warning(i.msg||"buying fail"),t.abrupt("return",!1);case 27:return t.next=29,e.$getTradeByHash(i.hash);case 29:if(r=t.sent,r){t.next=34;break}return n.close(),e.$message.warning("buying fail"),t.abrupt("return",!1);case 34:e.$ajax({url:"buyingRecord",method:"post",data:{token:e.nft.token,hash:e.nft.hash,price:e.nft.base_price,type:"购买"}}).then((function(t){n.close(),200===t.code?(e.getData(),e.$message.success("buying success, wait the owner confirm")):e.$message.warning("buying fail")})).catch((function(t){n.close(),e.$message.warning("buying fail")}));case 35:case"end":return t.stop()}}),t)})))()},userbalance:function(){var e=this;return new Promise((function(t){if(!e.address||e.chainID!==e.runChainID)return t(0),!1;var a=new o["a"].providers.Web3Provider(window.ethereum),n=new o["a"].Contract(e.metamask.contractAddressPizza,e.metamask.contractAbiPizza,a);n.balanceOf(e.address).then(t).catch((function(){t(0)}))}))},allowance:function(e,t,a){return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.t0=Number,n.next=3,e.allowance(t,a);case 3:return n.t1=n.sent,n.abrupt("return",(0,n.t0)(n.t1));case 5:case"end":return n.stop()}}),n)})))()},waitSuccessApprove:function(e,t,a,n){var s=this;return new Promise((function(r){var c=0,l=setInterval(Object(i["a"])(regeneratorRuntime.mark((function i(){var o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return c++,i.next=3,s.allowance(e,a,n);case 3:o=i.sent,o>=Number(t)?(clearInterval(l),r(!0)):c>60&&(r(!1),clearInterval(l));case 5:case"end":return i.stop()}}),i)}))),1e3)}))},approve:function(e){var t=this;return new Promise(function(){var a=Object(i["a"])(regeneratorRuntime.mark((function a(n){var s,i,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.chainID===t.runChainID&&t.address||n(!1),s=new o["a"].providers.Web3Provider(window.ethereum),i=new o["a"].Contract(t.metamask.contractAddressPizza,t.metamask.contractAbiPizza,s),a.next=5,t.allowance(i,t.address,t.metamask.sellAddress);case 5:if(r=a.sent,!(r>=1e18*Number(e))){a.next=9;break}return n(!0),a.abrupt("return",!1);case 9:e+="000000000000000000",i.connect(s.getSigner()).approve(t.metamask.sellAddress,e+"000000000").then((function(){t.waitSuccessApprove(i,e,t.address,t.metamask.sellAddress).then(n)})).catch((function(){n(!1)}));case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},getTokenMinMax:function(){var e=this;if(this.nft.token){var t=new o["a"].providers.Web3Provider(window.ethereum),a=new o["a"].Contract(this.metamask.sellAddress,this.metamask.sellAbi,t);a.getTokenMinMax(this.nft.token).then((function(t){e.addPriceMin=Number(t[0].toString()),e.investMin=Number(t[1].toString()),e.investMax=Number(t[2].toString())})).catch((function(e){}))}},showAddPrice:function(){this.AddPriceDialog=!0,this.AddPriceVal="",this.getTokenMinMax()},investSure:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,s,i,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.address){t.next=3;break}return e.$message.warning(e.translateTitle("mustConnectWallet")),t.abrupt("return",!1);case 3:if(e.chainID===e.runChainID){t.next=6;break}return e.$message.warning(e.translateTitle("changeBsc")),t.abrupt("return",!1);case 6:if(!(e.investVal<e.investMin||e.investVal>e.investMax)){t.next=9;break}return e.$message.warning("invest price must be between "+e.investMin+" and "+e.investMax+" piza"),t.abrupt("return",!1);case 9:return a=e.investVal,t.next=12,e.userbalance();case 12:if(n=t.sent,!(1e18*a>n)){t.next=16;break}return e.$message.warning("pizza balance less then your invest"),t.abrupt("return",!1);case 16:return s=e.$baseLoading(3,"nft invest sending"),t.next=19,e.approve(a);case 19:if(i=t.sent,i){t.next=24;break}return s.close(),e.$message.warning("nft invest fail ,try approve fail"),t.abrupt("return",!1);case 24:return t.next=26,e.investBuyer(1,a,e.investFee);case 26:if(r=t.sent,r){t.next=31;break}return s.close(),e.$message.warning("nft invest fail"),t.abrupt("return",!1);case 31:return t.next=33,e.$getTradeByHash(r);case 33:if(c=t.sent,c){t.next=38;break}return s.close(),e.$message.warning("invest fail"),t.abrupt("return",!1);case 38:e.$ajax({url:"buyingRecord",method:"post",data:{token:e.nft.token,hash:e.nft.hash,price:e.investVal,type:"投资"}}).then((function(t){s.close(),200===t.code?(e.getData(),e.investDialog=!1,e.$message.success("invest success")):e.$message.warning("invest fail")})).catch((function(t){s.close(),e.$message.warning("invest fail")}));case 39:case"end":return t.stop()}}),t)})))()},investBuyer:function(e,t,a){var n=this;return new Promise((function(s){var i=new o["a"].providers.Web3Provider(window.ethereum),r=new o["a"].Contract(n.metamask.sellAddress,n.metamask.sellAbi,i),c=r.connect(i.getSigner());c.autopricebuyer(t,e,n.nft.token,a).then((function(e){s(e.hash)})).catch((function(e){s(!1)}))}))},addPriceSure:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,s,i,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.address){t.next=3;break}return e.$message.warning(e.translateTitle("mustConnectWallet")),t.abrupt("return",!1);case 3:if(e.chainID===e.runChainID){t.next=6;break}return e.$message.warning(e.translateTitle("changeBsc")),t.abrupt("return",!1);case 6:if(a=e.AddPriceVal,!(a<=e.addPriceMin||a>parseInt(1.5*e.addPriceMin))){t.next=10;break}return e.$message.warning("invest price must be between "+e.addPriceMin+" and "+parseInt(1.5*e.addPriceMin)+"  piza"),t.abrupt("return",!1);case 10:return t.next=12,e.userbalance();case 12:if(n=t.sent,!(1e18*a>n)){t.next=16;break}return e.$message.warning("pizza balance less then add price"),t.abrupt("return",!1);case 16:return s=e.$baseLoading(3,"nft invest sending"),t.next=19,e.approve(a);case 19:if(i=t.sent,i){t.next=24;break}return s.close(),e.$message.warning("nft add price fail ,try approve fail"),t.abrupt("return",!1);case 24:return t.next=26,e.investBuyer(0,a,e.addPriceFee);case 26:if(r=t.sent,r){t.next=31;break}return s.close(),e.$message.warning("nft add price fail"),t.abrupt("return",!1);case 31:return t.next=33,e.$getTradeByHash(r);case 33:if(c=t.sent,c){t.next=38;break}return s.close(),e.$message.warning("add price fail"),t.abrupt("return",!1);case 38:e.$ajax({url:"buyingRecord",method:"post",data:{token:e.nft.token,hash:e.nft.hash,price:a,type:"出价"}}).then((function(t){s.close(),200===t.code?(e.getData(),e.AddPriceDialog=!1,e.$message.success("add price success")):e.$message.warning("add price fail")})).catch((function(t){s.close(),e.$message.warning("add price fail")}));case 39:case"end":return t.stop()}}),t)})))()}}},h=f,p=(a("ff8e"),a("2877")),v=Object(p["a"])(h,n,s,!1,null,null,null);t["default"]=v.exports},"9bdc":function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},"9d78":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{attrs:{"label-width":"60px"}},[a("el-form-item",{attrs:{label:e.translateTitle("标题")}},[a("el-input",{attrs:{size:"mini",placeholder:e.translateTitle("请输入标题")},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),a("el-form-item",{attrs:{label:e.translateTitle("内容")}},[a("el-input",{staticClass:"help_textarea",attrs:{type:"textarea",resize:"none",autosize:{minRows:4,maxRows:4},size:"mini",placeholder:e.translateTitle("请输入帮助与反馈内容")},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"mini"},on:{click:e.subRepot}},[e._v(e._s(e.translateTitle("立即提交")))])],1)],1)},s=[],i=a("79fa"),r={name:"MyReport",props:{hash:{type:String,default:""},token:{type:String,default:""}},data:function(){return{content:"",repot:!1,title:""}},methods:{translateTitle:i["translateTitle"],subRepot:function(){var e=this;return!this.repot&&(this.title?this.content?(this.repot=!0,void this.$ajax({url:"userRepot",data:{title:this.title,content:this.content,token:this.token,hash:this.hash},method:"post"}).then((function(t){e.repot=!1,200==t.code?(e.$message.success("success"),e.$emit("close"),e.title="",e.content=""):e.$message.error(t.msg||"report feedback fail")})).catch((function(t){return e.$message.error("report feedback fail"),e.repot=!0,!1}))):(this.$message.warning(this.translateTitle("请输入帮助与反馈内容")),!1):(this.$message.warning(this.translateTitle("请输入标题")),!1))}}},c=r,l=a("2877"),o=Object(l["a"])(c,n,s,!1,null,"9fb191aa",null);t["default"]=o.exports},ae0b:function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},c8c0:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"text-align":"center"}},[a("div",[a("textarea",{ref:"JQ_textarea",staticClass:"link_textarea",attrs:{readonly:""}},[e._v(e._s(e.url))])]),a("el-button",{on:{click:e.copy}},[e._v(e._s(e.translateTitle("复制链接")))])],1)},s=[],i=a("5530"),r=a("2f62"),c=a("79fa"),l={name:"MyShare",props:{token:{type:String,default:""}},data:function(){return{}},computed:Object(i["a"])(Object(i["a"])({},Object(r["c"])({address:"connect/address"})),{},{url:function(){var e=window.location.host,t=window.location.protocol;return t+"//"+e+"/nft/detail/"+this.token+"?ref="+this.address}}),methods:{translateTitle:c["translateTitle"],copy:function(){var e=this.$refs["JQ_textarea"];e.select(),document.execCommand("Copy"),this.$emit("close"),this.$message.success("copy success")}}},o=l,d=(a("dc98"),a("2877")),u=Object(d["a"])(o,n,s,!1,null,null,null);t["default"]=u.exports},dc98:function(e,t,a){"use strict";a("ae0b")},ee13:function(e,t,a){e.exports=a.p+"static/img/logo1.aacda647.png"},ff8e:function(e,t,a){"use strict";a("9bdc")}}]);