/*!
 *  build: admin-pro 
 *  copyright: chuzhixin 1204505056@qq.com 
 *  time: 2021-11-7 15:40:52
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-830d1c8e"],{4691:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{sm:12,md:12,lg:12}},[a("label",{staticClass:"upload_main max400"},[a("div",{staticClass:"upload_type"},[a("p",{staticClass:"upload_desc"},[t._v("PNG,GIF,JPG,JPEG,WEBP. Max 100mb")]),a("div",{staticClass:"upload_btn"},[t._v(t._s(t.translateTitle("选择文件")))])]),a("input",{attrs:{type:"file"},on:{change:t.selectFiles}})])]),a("el-col",{attrs:{sm:12,md:12,lg:12}},[t.value&&t.value.path?a("div",{staticClass:"prev_img max400 "},["mp4"===t.type||"mp3"===t.type?a("vab-player-mp4",{attrs:{config:t.mp4Config}}):a("div",{staticStyle:{width:"100%",height:"100%"}},[a("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.value.path,fit:"contain"}})],1)],1):t._e()])],1)},n=[],i=(a("ac1f"),a("1276"),a("b0c0"),a("a15b"),a("34d4")),r=a("79fa"),l={name:"MyUploadBtn",props:{value:{type:Object,default:function(){return{path:"",token:""}}},address:{type:String,default:""}},components:{VabPlayerMp4:i["VabPlayerMp4"]},computed:{type:function(){var t=null;return this.value&&this.value.path&&(t=String(this.value.path).split(".").pop().toLowerCase()),t},mp4Config:function(){return{id:"mse1",url:this.value.path,volume:.6,autoplay:!0,fluid:!0,screenShot:!1,pip:!1}}},methods:{translateTitle:r["translateTitle"],selectFiles:function(t){if(!this.address)return this.$message.warning(this.translateTitle("mustConnectWallet")),!1;var e=t.target.files,a=this;if(e&&e.length){var s=["png","gif","jpg","jpeg","webp"],n=(e[0].name||"").split(".").pop();if(n=String(n||"").toLowerCase(),-1===s.indexOf(n))return a.$message.warning("file type must be "+s.join("、")),!1;var i=new FormData,r=a.$baseLoading(3,"file creating preview.");i.append("file",e[0]),a.$ajax({url:"createErc721",data:i,method:"post"}).then((function(t){200===t.code?(setTimeout((function(){r.close()}),500),a.$emit("input",{path:t.data.host+t.data.path,token:t.data.token})):(r.close(),a.$message.error(t.msg||"upload fail"))})).catch((function(t){setTimeout((function(){r.close()}),500),a.$message.error("upload fail")}))}}}},c=l,u=(a("8816"),a("2877")),o=Object(u["a"])(c,s,n,!1,null,null,null);e["default"]=o.exports},5475:function(t,e,a){"use strict";a("5d64")},"5d64":function(t,e,a){t.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},7900:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nft-container"},[a("div",{staticClass:"create_body"},[a("div",{staticClass:"create_container"},[a("router-link",{staticClass:"back_btn",attrs:{to:"/nft/create"}},[a("span",{staticClass:"el-icon el-icon-back"}),a("span",[t._v(t._s(t.translateTitle("管理收藏品类型")))])]),a("div",{staticClass:"create_title"},[t._v(t._s(t.title))]),a("div",[a("div",{staticClass:"upload_txt"},[t._v(t._s(t.translateTitle("上传文件")))]),a("MyUploadBtn",{attrs:{address:t.address},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{sm:12,md:12,lg:12}},[1==t.$route.params.type?a("div",[a("p",{staticClass:"title_txt"},[t._v(t._s(t.translateTitle("数量")))]),a("el-input",{staticClass:"inp_main",attrs:{maxLength:"5",size:"small",placeholder:t.translateTitle("请输入复制的数量")},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}})],1):t._e(),a("div",[a("p",{staticClass:"title_txt"},[t._v(t._s(t.translateTitle("分类")))]),a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:t.symbolTxt,callback:function(e){t.symbolTxt=e},expression:"symbolTxt"}},t._l(t.typeOpts,(function(e){return a("el-option",{key:e.value,attrs:{value:e.title,label:t.translateTitle(e.title)}})})),1)],1),a("div",[a("p",{staticClass:"title_txt"},[t._v(t._s(t.translateTitle("标题")))]),a("el-input",{staticClass:"inp_main",attrs:{maxLength:"60",size:"small",placeholder:t.translateTitle("请输入您的标题")},model:{value:t.ercTitle,callback:function(e){t.ercTitle=e},expression:"ercTitle"}})],1),t.requireWH?a("div",[a("p",{staticClass:"title_txt"},[t._v(t._s(t.translateTitle("作品宽度"))+"(cm)")]),a("el-input",{staticClass:"inp_main",attrs:{maxLength:"10",size:"small",placeholder:t.translateTitle("请输入作品宽度")},model:{value:t.ercWidth,callback:function(e){t.ercWidth=e},expression:"ercWidth"}})],1):t._e(),t.requireWH?a("div",[a("p",{staticClass:"title_txt"},[t._v(t._s(t.translateTitle("作品高度"))+"(cm)")]),a("el-input",{staticClass:"inp_main",attrs:{maxLength:"10",size:"small",placeholder:t.translateTitle("请输入作品高度")},model:{value:t.ercHeight,callback:function(e){t.ercHeight=e},expression:"ercHeight"}})],1):t._e(),a("div",[a("p",{staticClass:"title_txt"},[t._v(t._s(t.translateTitle("简介")))]),a("el-input",{staticClass:"inp_main",attrs:{maxLength:"200",size:"small",placeholder:t.translateTitle("请输入您的作品简介")},model:{value:t.ercDesc,callback:function(e){t.ercDesc=e},expression:"ercDesc"}})],1),a("div",[a("div",{staticClass:"sub_btn",on:{click:t.subData}},[t._v(t._s(t.translateTitle("创建")))])])])],1)],1)])])},n=[],i=a("1da1"),r=a("5530"),l=(a("96cf"),a("a9e3"),a("ac1f"),a("5319"),a("fb6a"),a("d3b7"),a("79fa")),c=a("4691"),u=a("2f62"),o=a("c030"),d={name:"NftUpload",components:{MyUploadBtn:c["default"]},data:function(){return{file:{path:"",token:""},num:1,symbolTxt:"",ercTitle:"",ercDesc:"",ercWidth:"",ercHeight:"",sending:!1,typeOpts:[{title:"电脑制作",value:1},{title:"摄影",value:2},{title:"音乐",value:3},{title:"表情包",value:4},{title:"logo",value:5},{title:"朋克",value:6},{title:"实体艺术品",value:7}]}},created:function(){},computed:Object(r["a"])({title:function(){return this.translateTitle(1===Number(this.$route.params.type)?"创建多个收藏品":"创建单一收藏品")},requireWH:function(){return"实体艺术品"==this.symbolTxt}},Object(u["c"])({address:"connect/address",metamask:"settings/metamask",chainID:"connect/chainID"})),watch:{num:function(t){this.num=(t||"").replace(/[^\d]/g,"")},ercWidth:function(t){this.ercWidth=(t||"").replace(/[^\d]/g,"")},ercHeight:function(t){this.ercHeight=(t||"").replace(/[^\d]/g,"")}},mounted:function(){},methods:{translateTitle:l["translateTitle"],judgeData:function(){var t=!0,e={path:this.file.path,token:[this.file.token],num:this.num,symbolTxt:this.symbolTxt,ercTitle:this.ercTitle,ercDesc:this.ercDesc,ercWidth:this.ercWidth,ercHeight:this.ercHeight},a="请填写完整信息";if(t&&!e.path&&(t=!1,a="请选择文件上传"),t&&!e.num&&1===Number(this.$route.params.type)&&(t=!1,a="请输入复制的数量"),t&&!e.symbolTxt&&(t=!1,a="请选择您的作品分类"),t&&!e.ercTitle&&(t=!1,a="请输入您的标题"),this.requireWH&&t&&!e.ercWidth&&(t=!1,a="请输入作品宽度"),this.requireWH&&t&&!e.ercHeight&&(t=!1,a="请输入作品高度"),t&&!e.ercDesc&&(t=!1,a="请输入您的作品简介"),this.num>1&&t){for(var s=this.file.token.slice(0,-6),n=[],i=0;i<this.num;i++){var r=s+""+("000000000"+String(i)).slice(-6);n.push(r)}e.token=n}return{code:t,data:e,msg:a}},subData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.sending){e.next=2;break}return e.abrupt("return",!1);case 2:if(t.address){e.next=5;break}return t.$message.warning(t.translateTitle("mustConnectWallet")),e.abrupt("return",!1);case 5:if(t.chainID===t.runChainID){e.next=8;break}return t.$message.warning(t.translateTitle("changeBsc")),e.abrupt("return",!1);case 8:if(a=t.judgeData(),a.code){e.next=12;break}return t.$message.warning(t.translateTitle(a.msg)),e.abrupt("return",!1);case 12:return t.sending=!0,s=t.$baseLoading(3,"creating nft."),e.next=16,t.createErc(a.data);case 16:n=e.sent,n?t.$message.error(t.translateTitle(n)):t.$message.success("success"),t.sending=!1,s.close();case 20:case"end":return e.stop()}}),e)})))()},_mint:function(t){var e=this;return new Promise((function(a){var s=new o["a"].providers.Web3Provider(window.ethereum),n=new o["a"].Contract(e.metamask.nftAddress,e.metamask.nftAbI,s);n.connect(s.getSigner())._mint(e.address,t.token,t.ercTitle,t.symbolTxt,t.ercDesc,t.path).then(a).catch((function(t){a(null)}))}))},createErc:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.address&&e.chainID===e.runChainID){a.next=2;break}return a.abrupt("return",e.translateTitle("mustConnectWallet")+e.translateTitle("changeBsc"));case 2:return a.next=4,e._mint(t);case 4:if(s=a.sent,s){a.next=7;break}return a.abrupt("return","创建失败");case 7:return a.next=9,e.$getTradeByHash(s.hash);case 9:if(n=a.sent,n){a.next=12;break}return a.abrupt("return","交易失败");case 12:e.$ajax({url:"recordErc",data:t,method:"post"}),e.file.path="",e.file.token="",e.file.token="",e.symbolTxt="",e.ercTitle="",e.ercWidth="",e.ercHeight="",e.ercDesc="";case 21:case"end":return a.stop()}}),a)})))()}}},p=d,m=(a("5475"),a("2877")),h=Object(m["a"])(p,s,n,!1,null,null,null);e["default"]=h.exports},8816:function(t,e,a){"use strict";a("92ae")},"92ae":function(t,e,a){t.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}}}]);